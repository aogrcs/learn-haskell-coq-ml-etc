<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>program design by calculation</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="description" content="program design by calculation"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">program design by calculation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">2.2 function application</a></li>
<li><a href="#sec-2">2.3  (2.6) function composition : \(\circ = (B \rightarrow C) \rightarrow (A \rightarrow B) \rightarrow A \rightarrow C\)</a>
<ul>
<li><a href="#sec-2-1">(2.8) composition is associative : \((f \circ g) \circ h = f \circ (g \circ h)\)</a></li>
</ul>
</li>
<li><a href="#sec-3">2.4  (2.9) identity function(s) : \(id \hspace{0.25em} x = x\)</a>
<ul>
<li><a href="#sec-3-1">(2.10) <code>id</code> is the <i>unit</i> of composition : \(f \circ id = id \circ f = f\)</a></li>
</ul>
</li>
<li><a href="#sec-4">2.5  (2.12) constant function(s) : \(const \hspace{0.25em} x \hspace{0.25em} \_ =  x\)</a>
<ul>
<li><a href="#sec-4-1">(2.13) constant-fusion : \(c \circ f = c\)</a></li>
</ul>
</li>
<li><a href="#sec-5">2.6 monics (one-to-one/injective) and epics (onto/surjective)</a></li>
<li><a href="#sec-6">2.7 (2.16) isomorphisms : \(f \circ f^{\circ} = id_b \wedge f^{\circ} \circ f = id_a\)</a></li>
<li><a href="#sec-7">2.8 products &#x2014; gluing functions which do not compose</a>
<ul>
<li><a href="#sec-7-1">(2.18) pair def : \(\langle f,g \rangle c = (f \hspace{0.25em} c, g \hspace{0.25em} c)\)</a></li>
<li><a href="#sec-7-2">(2.20) \(\times\)-cancellation : <code>fst</code> / <code>snd</code> projections</a></li>
<li><a href="#sec-7-3">(2.22) \(\times\) of two functions def : \(f \times g = \langle f \circ fst, g \circ snd \rangle\)</a></li>
<li><a href="#sec-7-4">(2.24) \(\times\)-fusion : \(\langle g,h \rangle \circ f = \langle g \circ f, h \circ f \rangle\)</a></li>
<li><a href="#sec-7-5">(2.25) \(\times\)-absorption : \((i \times j) \circ \langle g,h \rangle = \langle i \circ g,j \circ h \rangle\)</a></li>
<li><a href="#sec-7-6">(2.26) : \(i \circ fst = fst \circ (i \times j)\)</a></li>
<li><a href="#sec-7-7">(2.27) : \(j \circ snd = snd \circ (i \times j)\)</a></li>
<li><a href="#sec-7-8">(2.28) \(\times\)-functor : \((g \circ h) \times (i \circ j) = (g \times i) \circ (h \times j)\)</a></li>
<li><a href="#sec-7-9">(2.29) \(\times\)-functor-id : \(id_A \times id_B = id_{A \times B}\)</a></li>
<li><a href="#sec-7-10">(2.30) \(\times\)-reflexion : \(\langle fst,snd \rangle = id_{A \times B}\)</a></li>
<li><a href="#sec-7-11">(2.31) \(\times\) is commutative : \(A \times B \cong B \times A\)</a></li>
<li><a href="#sec-7-12">(2.32) \(\times\) is associative : \(A \times (B \times C) \cong (A \times B) \times C\)</a></li>
</ul>
</li>
<li><a href="#sec-8">2.9 coproducts &#x2014; gluing functions which do not compose</a>
<ul>
<li><a href="#sec-8-1">(2.35) either def : \([f,g] : A + B \rightarrow C\)</a></li>
<li><a href="#sec-8-2">(2.37) \(+\) of two functions def : \(f + g = [Left \circ f, Right \circ g]\)</a></li>
<li><a href="#sec-8-3">(2.38) \(+\)-cancellation : \([g,h] \circ Left = g\), \([g,h] \circ Right = h\)</a></li>
<li><a href="#sec-8-4">(2.39) \(+\)-reflexion : \([ Left, Right ] = id_{A + B}\)</a></li>
<li><a href="#sec-8-5">(2.40) \(+\)-fusion : \(f \circ [ g , h ] = [ f \circ g , f \circ h ]\)</a></li>
<li><a href="#sec-8-6">(2.41) \(+\)-absorption : \([ g , h ] \circ ( i + j ) = [ g \circ i, h \circ j ]\)</a></li>
<li><a href="#sec-8-7">(2.42) \(+\)-functor : \((g \circ h) + (i \circ j) = (g + i) \circ (h + j)\)</a></li>
<li><a href="#sec-8-8">(2.43) \(+\)-functor-id : \(id_A + id_B = id_{A+B}\)</a></li>
</ul>
</li>
<li><a href="#sec-9">2.10 mixing products and coproducts</a>
<ul>
<li><a href="#sec-9-1">(2.47) pair/either exchange : \([ \langle f , g \rangle , \langle h , k \rangle ] = \langle [ f , h ], [ g , k ] \rangle\)</a></li>
<li><a href="#sec-9-2">(2.49) undistr def : \(undistr = [ id \times first , id \times snd ]\)</a></li>
<li><a href="#sec-9-3">(2.50) isomorphism: product distributes through coproduct : \((A \times B) + (A \times C) \cong A \times (B + C)\)</a></li>
<li><a href="#sec-9-4">motivation for functors</a></li>
</ul>
</li>
</ul>
</div>
</div>
<STYLE> <!-- A{text-decoration:none} --> </STYLE>

---
title: program design by calculation
tags: haskell, monad
---

<p>
Last Modified : 2015 Jan 30 (Fri) 11:24:58 by Harold Carr.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #5F7F5F;">{-</span><span style="color: #7F9F7F;"># LANGUAGE NoMonomorphismRestriction #-}</span>
<span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">for `arr transform`</span>

<span style="color: #F0DFAF; font-weight: bold;">module</span> <span style="color: #7CB8BB;">PDBC</span> <span style="color: #F0DFAF; font-weight: bold;">where</span>

<span style="color: #F0DFAF; font-weight: bold;">import</span> <span style="color: #7CB8BB;">Control.Arrow</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> <span style="color: #7CB8BB;">Data.Char</span> (digitToInt)

<span style="color: #F0DFAF; font-weight: bold;">import</span> <span style="color: #7CB8BB;">Test.HUnit</span>      <span style="color: #F0DFAF; font-weight: bold;">as</span> <span style="color: #7CB8BB;">T</span>
<span style="color: #F0DFAF; font-weight: bold;">import</span> <span style="color: #7CB8BB;">Test.HUnit.Util</span> <span style="color: #F0DFAF; font-weight: bold;">as</span> <span style="color: #7CB8BB;">U</span> <span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">https://github.com/haroldcarr/test-hunit-util</span>
</pre>
</div>

<hr  />
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">2.2 function application</h2>
<div class="outline-text-2" id="text-1">
<p>
TODO
</p>

<hr  />
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">2.3  (2.6) function composition : \(\circ = (B \rightarrow C) \rightarrow (A \rightarrow B) \rightarrow A \rightarrow C\)</h2>
<div class="outline-text-2" id="text-2">
<p>
aka "function-arrow chaining"
</p>

<p>
<a href="http://hackage.haskell.org/package/base-4.7.0.1/docs/src/GHC-Base.html#.">http://hackage.haskell.org/package/base-4.7.0.1/docs/src/GHC-Base.html#.</a>
</p>

<pre class="example">
(.)    :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
(.) f g = \x -&gt; f (g x)
</pre>


<div class="figure">
<p><img src="./function-composition.png" alt="function-composition.png" />
</p>
</div>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">(2.8) composition is associative : \((f \circ g) \circ h = f \circ (g \circ h)\)</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Similar to \((a + b) + c = a + (b + c)\)
</p>


<div class="figure">
<p><img src="./function-composition-associative.png" alt="function-composition-associative.png" />
</p>
</div>

<hr  />
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">2.4  (2.9) identity function(s) : \(id \hspace{0.25em} x = x\)</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="http://hackage.haskell.org/package/base-4.7.0.1/docs/src/GHC-Base.html#id">http://hackage.haskell.org/package/base-4.7.0.1/docs/src/GHC-Base.html#id</a>
</p>

<pre class="example">
id   :: a -&gt; a
id x = x
</pre>

<p>
<code>id</code> does not lose any information
</p>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">(2.10) <code>id</code> is the <i>unit</i> of composition : \(f \circ id = id \circ f = f\)</h3>
<div class="outline-text-3" id="text-3-1">

<div class="figure">
<p><img src="./function-composition-id-is-unit.png" alt="function-composition-id-is-unit.png" />
</p>
</div>

<hr  />
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">2.5  (2.12) constant function(s) : \(const \hspace{0.25em} x \hspace{0.25em} \_ =  x\)</h2>
<div class="outline-text-2" id="text-4">
<p>
<a href="http://hackage.haskell.org/package/base-4.7.0.1/docs/src/GHC-Base.html#const">http://hackage.haskell.org/package/base-4.7.0.1/docs/src/GHC-Base.html#const</a>
</p>

<pre class="example">
const     :: a -&gt; b -&gt; a
const x _ =  x
</pre>

<p>
A function that results after apply <code>const</code> to <code>x</code>
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">c'</span> <span style="color: #DFAF8F;">::</span> a <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Char</span>
<span style="color: #93E0E3;">c'</span>  <span style="color: #DFAF8F;">=</span> const <span style="color: #CC9393;">'c'</span>
</pre>
</div>

<p>
loses all information (i.e., ignores its argument).
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">(2.13) constant-fusion : \(c \circ f = c\)</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">constantFusion</span>  <span style="color: #DFAF8F;">::</span> (x <span style="color: #DFAF8F;">-&gt;</span> y) <span style="color: #DFAF8F;">-&gt;</span> x <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Char</span>
<span style="color: #93E0E3;">constantFusion</span> f <span style="color: #DFAF8F;">=</span> c' <span style="color: #DFAF8F;">.</span> f
</pre>
</div>

<p>
The following diagram shows
</p>
<ul class="org-ul">
<li>c' as the function (<code>const_2</code>) that results from applying <code>const</code> (here shown as <code>const_1</code>) to <code>Char</code>
</li>
<li><code>f</code> applied to <code>x</code> resulting in <code>y</code>
</li>
<li><code>const_2</code> applied to <code>y</code> resulting in <code>Char</code>
</li>
</ul>


<div class="figure">
<p><img src="./constant-fusion.png" alt="constant-fusion.png" />
</p>
</div>

<p>
Note
</p>
<ul class="org-ul">
<li>input to <code>f</code> can be any type
</li>
<li>result of <code>f</code> can be any type
</li>
<li>ignores result of <code>f</code>
</li>
<li>output of constant-fusion not (necessarily) type related to co/domain of <code>f</code>
</li>
</ul>

<p>
constant-fusion example
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">c</span> <span style="color: #DFAF8F;">::</span> a <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Char</span>
<span style="color: #93E0E3;">c</span> <span style="color: #DFAF8F;">=</span> const <span style="color: #CC9393;">'c'</span>

<span style="color: #93E0E3;">c0</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"c0"</span>
     (c'        <span style="color: #DFAF8F;">.</span> (<span style="color: #DFAF8F;">+</span>1)       <span style="color: #DFAF8F;">$</span> 45)
     <span style="color: #CC9393;">'c'</span>

<span style="color: #93E0E3;">c1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"c1"</span>
     (const 30  <span style="color: #DFAF8F;">.</span> (<span style="color: #CC9393;">"foo"</span> <span style="color: #DFAF8F;">++</span>) <span style="color: #DFAF8F;">$</span> <span style="color: #CC9393;">"bar"</span>)
     30
</pre>
</div>

<p>
<b>Exercise 2.1</b>
</p>

<p>
These two functions have the same type:
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">fc1</span> <span style="color: #DFAF8F;">::</span> (c <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> c <span style="color: #DFAF8F;">-&gt;</span> b <span style="color: #DFAF8F;">-&gt;</span> a
<span style="color: #93E0E3;">fc1</span> f c <span style="color: #DFAF8F;">=</span> f <span style="color: #DFAF8F;">.</span> const c

<span style="color: #93E0E3;">fc2</span> <span style="color: #DFAF8F;">::</span> (c <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> c <span style="color: #DFAF8F;">-&gt;</span> b <span style="color: #DFAF8F;">-&gt;</span> a
<span style="color: #93E0E3;">fc2</span> f c <span style="color: #DFAF8F;">=</span> const (f c)
</pre>
</div>

<p>
Regarding the functions that result from applying <code>fc1</code> and <code>fc2</code> to <code>f</code> and <code>c</code>
</p>

<ul class="org-ul">
<li>1st arg: domain and argument to <code>f</code>
</li>
<li>2nd arg: ignored
</li>
<li>output: codomain and result of <code>f</code>
</li>
</ul>

<p>
From the outside there is no difference.
</p>

<p>
On the inside
</p>


<div class="figure">
<p><img src="./e2-1a.png" alt="e2-1a.png" />
</p>
</div>


<div class="figure">
<p><img src="./e2-1b.png" alt="e2-1b.png" />
</p>
</div>

<ul class="org-ul">
<li>fc1' first "remembers" the first arg, then ignores <code>b</code>, then applies <code>f</code> to the remembered value.
</li>
<li>fc2' first applies <code>f</code> to the first arg and "remembers" the result, that is returned after ignoring <code>b</code>.
</li>
</ul>

<hr  />
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">2.6 monics (one-to-one/injective) and epics (onto/surjective)</h2>
<div class="outline-text-2" id="text-5">
<p>
Identity and constant functions are limit points with respect to information preservation
</p>
<ul class="org-ul">
<li>identity preserves all information
</li>
<li>constant loses all information
</li>
</ul>

<p>
All other functions lose some information (regarded as unneeded in context).
</p>

<p>
Functional programming: art of transforming or losing information in a controlled manner to fit context.
</p>

<p>
Functions lose information when
</p>
<ul class="org-ul">
<li>give same output for two or more inputs (e.g., constant function)
</li>
<li>only use one value of codomain (e.g., constant function)
</li>
</ul>

<p>
<a href="http://en.wikipedia.org/wiki/Bijection,_injection_and_surjection">http://en.wikipedia.org/wiki/Bijection,_injection_and_surjection</a>
</p>

<p>
Injective functions (aka "one-to-one", "monic") do not lose information
</p>
<ul class="org-ul">
<li>each element of domain maps to unique element of codomain
</li>
<li>(but not all elements of codomain are necessarily mapped to)
</li>
<li>Categorical generalization of injective functions called "monic"
<ul class="org-ul">
<li><a href="http://en.wikipedia.org/wiki/Monic_morphism">http://en.wikipedia.org/wiki/Monic_morphism</a>
</li>
</ul>
</li>
</ul>

<p>
Surjective functions (aka "onto", "epic") do not lose information
</p>
<ul class="org-ul">
<li>all elements of codomain are mapped to
</li>
<li>Categorical generalization of surjective functions call "epic" (but converse is not true in all categories)
<ul class="org-ul">
<li><a href="http://en.wikipedia.org/wiki/Epimorphism">http://en.wikipedia.org/wiki/Epimorphism</a>
</li>
</ul>
</li>
</ul>

<p>
<b>Exercise 2.2</b>
</p>

<p>
Under what circumstances is a constant function epic?
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #F0DFAF; font-weight: bold;">data</span> <span style="color: #7CB8BB;">Single</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">Single</span> <span style="color: #F0DFAF; font-weight: bold;">deriving</span> <span style="color: #7CB8BB;">Show</span>

<span style="color: #93E0E3;">epicConstantFunction</span> <span style="color: #DFAF8F;">::</span> b <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Single</span>
<span style="color: #93E0E3;">epicConstantFunction</span> <span style="color: #DFAF8F;">=</span> const <span style="color: #7CB8BB;">Single</span>
</pre>
</div>

<hr  />
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">2.7 (2.16) isomorphisms : \(f \circ f^{\circ} = id_b \wedge f^{\circ} \circ f = id_a\)</h2>
<div class="outline-text-2" id="text-6">
<p>
A <i>isomorphic</i> function (aka <i>bijective</i>) is one-to-one (monic) and onto (epic).
</p>

<p>
<a href="http://en.wikipedia.org/wiki/Isomorphism">http://en.wikipedia.org/wiki/Isomorphism</a>
</p>

<p>
Given \(f : A \rightarrow B\),
\(f\) has <i>inverse</i>
\(f^{\circ} : B \rightarrow A\),
such that 2.16 (above) holds.
</p>

<p>
Isomorphisms are important because they convert between "formats"
without losing information, although the data adopts a different
“shape” in each of them.
</p>

<p>
"A is isomorphic to B" is written: \(A \cong B\).
</p>

<p>
Isomorphic data domains are regarded as "abstractly" the same.
</p>

<p>
<b>example</b>
</p>

<p>
<a href="http://hackage.haskell.org/package/base-4.7.0.1/docs/Prelude.html#t:Enum">http://hackage.haskell.org/package/base-4.7.0.1/docs/Prelude.html#t:Enum</a>
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #F0DFAF; font-weight: bold;">data</span> <span style="color: #7CB8BB;">Weekday</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">Sunday</span> <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Monday</span> <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Tuesday</span> <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Wednesday</span> <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Thursday</span> <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Friday</span> <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Saturday</span>
             <span style="color: #F0DFAF; font-weight: bold;">deriving</span> (<span style="color: #7CB8BB;">Enum</span>, <span style="color: #7CB8BB;">Eq</span>, <span style="color: #7CB8BB;">Ord</span>, <span style="color: #7CB8BB;">Show</span>)

<span style="color: #F0DFAF; font-weight: bold;">data</span> <span style="color: #7CB8BB;">Seven</span>   <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">One</span>    <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Two</span>    <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Three</span>   <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Four</span>      <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Five</span>     <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Six</span>    <span style="color: #DFAF8F;">|</span> <span style="color: #7CB8BB;">Seven</span>
             <span style="color: #F0DFAF; font-weight: bold;">deriving</span> (<span style="color: #7CB8BB;">Enum</span>, <span style="color: #7CB8BB;">Eq</span>, <span style="color: #7CB8BB;">Ord</span>, <span style="color: #7CB8BB;">Show</span>)

<span style="color: #93E0E3;">transform</span> <span style="color: #DFAF8F;">::</span> (<span style="color: #7CB8BB;">Enum</span> a, <span style="color: #7CB8BB;">Ord</span> a, <span style="color: #7CB8BB;">Enum</span> b, <span style="color: #7CB8BB;">Ord</span> b) <span style="color: #DFAF8F;">=&gt;</span> a <span style="color: #DFAF8F;">-&gt;</span> b
<span style="color: #93E0E3;">transform</span> <span style="color: #DFAF8F;">=</span> toEnum <span style="color: #DFAF8F;">.</span> fromEnum

<span style="color: #93E0E3;">i0</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"i0"</span>
     (transform <span style="color: #7CB8BB;">Tuesday</span>)
     <span style="color: #7CB8BB;">Three</span>

<span style="color: #93E0E3;">i1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"i1"</span>
     (transform <span style="color: #7CB8BB;">Three</span>)
     <span style="color: #7CB8BB;">Tuesday</span>

<span style="color: #93E0E3;">transform2</span> <span style="color: #DFAF8F;">::</span> (<span style="color: #7CB8BB;">Enum</span> a, <span style="color: #7CB8BB;">Ord</span> a) <span style="color: #DFAF8F;">=&gt;</span> <span style="color: #7CB8BB;">Int</span> <span style="color: #DFAF8F;">-&gt;</span> a
<span style="color: #93E0E3;">transform2</span> <span style="color: #DFAF8F;">=</span> toEnum <span style="color: #DFAF8F;">.</span> (<span style="color: #DFAF8F;">`rem`</span> 7)

<span style="color: #93E0E3;">i2</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"i2"</span>
     (transform2 15)
     <span style="color: #7CB8BB;">Two</span>

<span style="color: #93E0E3;">i3</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"i3"</span>
     (transform2 15)
     <span style="color: #7CB8BB;">Monday</span>
</pre>
</div>

<p>
Constants, identities, epics, monics and isos are <b>closed under
composition</b> (e.g., the composition of two epics is epic).
</p>

<hr  />
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">2.8 products &#x2014; gluing functions which do not compose</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">(2.18) pair def : \(\langle f,g \rangle c = (f \hspace{0.25em} c, g \hspace{0.25em} c)\)</h3>
<div class="outline-text-3" id="text-7-1">
<p>
\(\langle f,g \rangle : C \rightarrow A \times B\)
</p>

<p>
Not every two functions can be composed, e.g., \(f : C \rightarrow A\)
and \(g : C \rightarrow B\) (because domain of one is not codomain of other).
</p>

<p>
But, since \(f\) and \(g\) share the same domain \(C\), their outputs can be paired (aka "split")
</p>

<p>
<a href="http://www.haskell.org/ghc/docs/7.4.1/html/libraries/ghc-prim-0.2.0.0/src/GHC-Tuple.html#(,)">http://www.haskell.org/ghc/docs/7.4.1/html/libraries/ghc-prim-0.2.0.0/src/GHC-Tuple.html#(,)</a>
</p>

<p>
<a href="https://hackage.haskell.org/package/base-4.4.0.0/docs/src/Data-Tuple.html">https://hackage.haskell.org/package/base-4.4.0.0/docs/src/Data-Tuple.html</a>
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">cartesian product of types</span>
<span style="color: #93E0E3;">pair</span> <span style="color: #DFAF8F;">::</span> (c <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> b) <span style="color: #DFAF8F;">-&gt;</span> c <span style="color: #DFAF8F;">-&gt;</span> (a,b)
<span style="color: #93E0E3;">pair</span> f g c <span style="color: #DFAF8F;">=</span> (f c, g c)

<span style="color: #93E0E3;">split</span> <span style="color: #DFAF8F;">=</span> pair <span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">aka</span>

<span style="color: #93E0E3;">p0</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p0"</span>
     [ (    transform <span style="color: #DFAF8F;">`pair`</span>     show) <span style="color: #7CB8BB;">Sunday</span>
     , (arr transform  <span style="color: #DFAF8F;">&amp;&amp;&amp;</span>   arr show) <span style="color: #7CB8BB;">Sunday</span>
     ]
     (<span style="color: #7CB8BB;">One</span>, <span style="color: #CC9393;">"Sunday"</span>)

<span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">cartesian product of elements</span>
<span style="color: #93E0E3;">p1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"p1"</span>
     [ (b,c) <span style="color: #DFAF8F;">|</span> b <span style="color: #DFAF8F;">&lt;-</span> [<span style="color: #7CB8BB;">Sunday</span>, <span style="color: #7CB8BB;">Monday</span>, <span style="color: #7CB8BB;">Tuesday</span>], c <span style="color: #DFAF8F;">&lt;-</span> [<span style="color: #7CB8BB;">One</span>, <span style="color: #7CB8BB;">Two</span>]]
     [(<span style="color: #7CB8BB;">Sunday</span>,<span style="color: #7CB8BB;">One</span>),(<span style="color: #7CB8BB;">Sunday</span>,<span style="color: #7CB8BB;">Two</span>),(<span style="color: #7CB8BB;">Monday</span>,<span style="color: #7CB8BB;">One</span>),(<span style="color: #7CB8BB;">Monday</span>,<span style="color: #7CB8BB;">Two</span>),(<span style="color: #7CB8BB;">Tuesday</span>,<span style="color: #7CB8BB;">One</span>),(<span style="color: #7CB8BB;">Tuesday</span>,<span style="color: #7CB8BB;">Two</span>)]
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">(2.20) \(\times\)-cancellation : <code>fst</code> / <code>snd</code> projections</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">p2</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"p2"</span> (fst (1,2)) 1
<span style="color: #93E0E3;">p3</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>t <span style="color: #CC9393;">"p3"</span> (snd (1,2)) 2
</pre>
</div>


<div class="figure">
<p><img src="./pair.png" alt="pair.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">(2.22) \(\times\) of two functions def : \(f \times g = \langle f \circ fst, g \circ snd \rangle\)</h3>
<div class="outline-text-3" id="text-7-3">
<p>
Use when domains do not coincide.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">product</span> <span style="color: #DFAF8F;">::</span> (c <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> (d <span style="color: #DFAF8F;">-&gt;</span> b) <span style="color: #DFAF8F;">-&gt;</span> (c,d) <span style="color: #DFAF8F;">-&gt;</span> (a,b)
<span style="color: #93E0E3;">product</span> f g <span style="color: #DFAF8F;">=</span> pair (f <span style="color: #DFAF8F;">.</span> fst) (g <span style="color: #DFAF8F;">.</span> snd)

<span style="color: #93E0E3;">p4</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p4"</span>
     [ ((    (<span style="color: #DFAF8F;">*</span>2) `<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product`     (<span style="color: #DFAF8F;">++</span><span style="color: #CC9393;">"bar"</span>))   (2,<span style="color: #CC9393;">"foo"</span>))
     , ((arr (<span style="color: #DFAF8F;">*</span>2) <span style="color: #DFAF8F;">***</span>            arr (<span style="color: #DFAF8F;">++</span><span style="color: #CC9393;">"bar"</span>))   (2,<span style="color: #CC9393;">"foo"</span>))
     ]
     (4, <span style="color: #CC9393;">"foobar"</span>)
</pre>
</div>


<div class="figure">
<p><img src="./product.png" alt="product.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4">(2.24) \(\times\)-fusion : \(\langle g,h \rangle \circ f = \langle g \circ f, h \circ f \rangle\)</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Pair/split is right-distributive with respect to composition
</p>


<div class="figure">
<p><img src="./product-fusion.png" alt="product-fusion.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">p5</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p5"</span>
     [ (pair (<span style="color: #DFAF8F;">*</span>2) show <span style="color: #DFAF8F;">.</span> digitToInt)                  <span style="color: #CC9393;">'3'</span>
     ,  pair ((<span style="color: #DFAF8F;">*</span>2) <span style="color: #DFAF8F;">.</span> digitToInt) (show <span style="color: #DFAF8F;">.</span> digitToInt)  <span style="color: #CC9393;">'3'</span>
     ]
     (6,<span style="color: #CC9393;">"3"</span>)
</pre>
</div>

<p>
Left-distributivity does not hold.
</p>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5">(2.25) \(\times\)-absorption : \((i \times j) \circ \langle g,h \rangle = \langle i \circ g,j \circ h \rangle\)</h3>
<div class="outline-text-3" id="text-7-5">
<p>
pair absorbs \(\times\) as a kind of fusion &#x2013; a consequence for \(\times\)-fusion and \(\times\)-cancellation.
</p>

<p>
For \(f \circ \langle g,h \rangle\) when \(f = i \times j\)
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">\((i \times j) \circ \langle g,h \rangle\)</td>
</tr>

<tr>
<td class="left">(2.22)</td>
<td class="left">product of 2 funs def</td>
<td class="left">=</td>
<td class="left">\(\langle i \circ fst, j \circ snd \rangle \circ \langle g,h \rangle\)</td>
</tr>

<tr>
<td class="left">(2.24)</td>
<td class="left">\(\times\)-fusion</td>
<td class="left">=</td>
<td class="left">\(\langle (i \circ fst) \circ \langle g, h \rangle,(j \circ snd) \circ \langle g,h \rangle \rangle\)</td>
</tr>

<tr>
<td class="left">(2.8)</td>
<td class="left">associative composition</td>
<td class="left">=</td>
<td class="left">\(\langle i \circ (fst \circ \langle g, h \rangle),j \circ (snd \circ \langle g,h \rangle) \rangle\)</td>
</tr>

<tr>
<td class="left">(2.20)</td>
<td class="left">\(\times\)-cancellation</td>
<td class="left">=</td>
<td class="left">\(\langle i \circ g,j \circ h \rangle\)</td>
</tr>
</tbody>
</table>


<div class="figure">
<p><img src="./product-absorption.png" alt="product-absorption.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">non-optimized version</span>
<span style="color: #93E0E3;">pcp</span>                        <span style="color: #DFAF8F;">::</span> (d <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> (e <span style="color: #DFAF8F;">-&gt;</span> b) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> d) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> e) <span style="color: #DFAF8F;">-&gt;</span> c <span style="color: #DFAF8F;">-&gt;</span> (a, b)
<span style="color: #93E0E3;">pcp</span>                i j g h <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product i j <span style="color: #DFAF8F;">.</span> pair g h

<span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">optimized version via 2.20</span>
<span style="color: #93E0E3;">productComposePair</span>         <span style="color: #DFAF8F;">::</span> (d <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> (e <span style="color: #DFAF8F;">-&gt;</span> b) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> d) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> e) <span style="color: #DFAF8F;">-&gt;</span> c <span style="color: #DFAF8F;">-&gt;</span> (a, b)
<span style="color: #93E0E3;">productComposePair</span> i j g h <span style="color: #DFAF8F;">=</span> pair (i <span style="color: #DFAF8F;">.</span> g) (j <span style="color: #DFAF8F;">.</span> h)

<span style="color: #93E0E3;">p6</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p6"</span>
     [ pcp                show read (<span style="color: #DFAF8F;">*</span>2) show   4
     , productComposePair show read (<span style="color: #DFAF8F;">*</span>2) show   4
     ]
     (<span style="color: #CC9393;">"8"</span>,4)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-6" class="outline-3">
<h3 id="sec-7-6">(2.26) : \(i \circ fst = fst \circ (i \times j)\)</h3>
</div>
<div id="outline-container-sec-7-7" class="outline-3">
<h3 id="sec-7-7">(2.27) : \(j \circ snd = snd \circ (i \times j)\)</h3>
<div class="outline-text-3" id="text-7-7">
<ul class="org-ul">
<li>(2.26) : given \(D \times E\) no need to evaluate \(j\)
</li>
<li>(2.27) : given \(D \times E\) no need to evaluate \(i\)
</li>
</ul>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">p7</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p7"</span>
     [ (fst <span style="color: #DFAF8F;">.</span> (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product show show))        (3, 4)
     , show <span style="color: #DFAF8F;">$</span> fst                              (3, 4) <span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">optimized via 2.26</span>
     ]
     <span style="color: #CC9393;">"3"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-8" class="outline-3">
<h3 id="sec-7-8">(2.28) \(\times\)-functor : \((g \circ h) \times (i \circ j) = (g \times i) \circ (h \times j)\)</h3>
<div class="outline-text-3" id="text-7-8">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">productFunctorLeft</span>  <span style="color: #DFAF8F;">::</span> (e <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> e) <span style="color: #DFAF8F;">-&gt;</span> (f <span style="color: #DFAF8F;">-&gt;</span> b) <span style="color: #DFAF8F;">-&gt;</span> (d <span style="color: #DFAF8F;">-&gt;</span> f) <span style="color: #DFAF8F;">-&gt;</span> (c, d) <span style="color: #DFAF8F;">-&gt;</span> (a, b)
<span style="color: #93E0E3;">productFunctorLeft</span>  g h i j <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product (g <span style="color: #DFAF8F;">.</span> h) (i <span style="color: #DFAF8F;">.</span> j)

<span style="color: #93E0E3;">productFunctorRight</span> <span style="color: #DFAF8F;">::</span> (e <span style="color: #DFAF8F;">-&gt;</span> a) <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> e) <span style="color: #DFAF8F;">-&gt;</span> (f <span style="color: #DFAF8F;">-&gt;</span> b) <span style="color: #DFAF8F;">-&gt;</span> (d <span style="color: #DFAF8F;">-&gt;</span> f) <span style="color: #DFAF8F;">-&gt;</span> (c, d) <span style="color: #DFAF8F;">-&gt;</span> (a, b)
<span style="color: #93E0E3;">productFunctorRight</span> g h i j <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product g i <span style="color: #DFAF8F;">.</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product h j

<span style="color: #93E0E3;">p8</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p8"</span>
     [ ((productFunctorLeft  (<span style="color: #DFAF8F;">+</span>2) (<span style="color: #DFAF8F;">+</span>4) (<span style="color: #DFAF8F;">+</span>6<span style="color: #DFAF8F;">.</span>0) (<span style="color: #DFAF8F;">+</span>8<span style="color: #DFAF8F;">.</span>0))<span style="color: #DFAF8F;">::</span>(<span style="color: #7CB8BB;">Int</span>,<span style="color: #7CB8BB;">Double</span>)<span style="color: #DFAF8F;">-&gt;</span>(<span style="color: #7CB8BB;">Int</span>,<span style="color: #7CB8BB;">Double</span>))        (1,100<span style="color: #DFAF8F;">.</span>0)
     , ((productFunctorRight (<span style="color: #DFAF8F;">+</span>2) (<span style="color: #DFAF8F;">+</span>4) (<span style="color: #DFAF8F;">+</span>6<span style="color: #DFAF8F;">.</span>0) (<span style="color: #DFAF8F;">+</span>8<span style="color: #DFAF8F;">.</span>0))<span style="color: #DFAF8F;">::</span>(<span style="color: #7CB8BB;">Int</span>,<span style="color: #7CB8BB;">Double</span>)<span style="color: #DFAF8F;">-&gt;</span>(<span style="color: #7CB8BB;">Int</span>,<span style="color: #7CB8BB;">Double</span>))        (1,100<span style="color: #DFAF8F;">.</span>0)
     ]
     (7,114<span style="color: #DFAF8F;">.</span>0)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-9" class="outline-3">
<h3 id="sec-7-9">(2.29) \(\times\)-functor-id : \(id_A \times id_B = id_{A \times B}\)</h3>
<div class="outline-text-3" id="text-7-9">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">p9</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p9"</span>
     [ <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product id id    (<span style="color: #CC9393;">"x"</span>, <span style="color: #CC9393;">'y'</span>)
     , id                    (<span style="color: #CC9393;">"x"</span>, <span style="color: #CC9393;">'y'</span>)
     ]
     (<span style="color: #CC9393;">"x"</span>, <span style="color: #CC9393;">'y'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-10" class="outline-3">
<h3 id="sec-7-10">(2.30) \(\times\)-reflexion : \(\langle fst,snd \rangle = id_{A \times B}\)</h3>
<div class="outline-text-3" id="text-7-10">

<div class="figure">
<p><img src="./product-reflexion.png" alt="product-reflexion.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">p10</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p10"</span>
     [ pair fst snd     (<span style="color: #CC9393;">"x"</span>, <span style="color: #CC9393;">'y'</span>)
     , id               (<span style="color: #CC9393;">"x"</span>, <span style="color: #CC9393;">'y'</span>)
     ]
     (<span style="color: #CC9393;">"x"</span>, <span style="color: #CC9393;">'y'</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-11" class="outline-3">
<h3 id="sec-7-11">(2.31) \(\times\) is commutative : \(A \times B \cong B \times A\)</h3>
<div class="outline-text-3" id="text-7-11">
<p>
\(\langle snd,fst \rangle = swap\)
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">swap0</span>    <span style="color: #DFAF8F;">::</span> (a,b) <span style="color: #DFAF8F;">-&gt;</span> (b,a)
<span style="color: #93E0E3;">swap0</span> ab <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">(,)</span> (snd ab) (fst ab)
<span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">swap0 (a,b) = (b,a)</span>
</pre>
</div>

<p>
Isomorphic:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">\(swap \circ swap\)</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">def swap</td>
<td class="left">=</td>
<td class="left">\(\langle snd,fst \rangle \circ swap\)</td>
</tr>

<tr>
<td class="left">(2.24)</td>
<td class="left">\(\times\)-fusion</td>
<td class="left">=</td>
<td class="left">\(\langle snd \circ swap,fst \circ swap \rangle\)</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">def swap</td>
<td class="left">=</td>
<td class="left">\(\langle snd \circ \langle snd,fst \rangle, fst \circ \langle snd,fst \rangle\)</td>
</tr>

<tr>
<td class="left">(2.20)</td>
<td class="left">\(\times\)-cancellation</td>
<td class="left">=</td>
<td class="left">\(\langle fst,snd \rangle\)</td>
</tr>

<tr>
<td class="left">(2.30)</td>
<td class="left">\(\times\)-reflexion</td>
<td class="left">=</td>
<td class="left">\(id\)</td>
</tr>
</tbody>
</table>

<p>
Therefore, no information is lost (or gained) when swapping fields in record datatypes.
</p>
</div>
</div>

<div id="outline-container-sec-7-12" class="outline-3">
<h3 id="sec-7-12">(2.32) \(\times\) is associative : \(A \times (B \times C) \cong (A \times B) \times C\)</h3>
<div class="outline-text-3" id="text-7-12">
<p>
\(assocl = \langle \langle fst, fst \circ snd \rangle, snd \circ snd \rangle\) <br  />
\(assocr = \langle fst \circ fst, \langle snd \circ fst, snd \rangle \rangle\)
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">assocl</span>              <span style="color: #DFAF8F;">::</span> (a, (b,c)) <span style="color: #DFAF8F;">-&gt;</span> ((a,b),c)
<span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">assocl (a,(b,c)) = ((a,b),c)</span>
<span style="color: #93E0E3;">assocl</span>              <span style="color: #DFAF8F;">=</span> pair   (pair fst (fst <span style="color: #DFAF8F;">.</span> snd))  (snd <span style="color: #DFAF8F;">.</span> snd)

<span style="color: #93E0E3;">assocr</span>              <span style="color: #DFAF8F;">::</span> ((a,b),c) <span style="color: #DFAF8F;">-&gt;</span> (a,(b,c))
<span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">assocr ((a,b),c) = (a,(b,c))</span>
<span style="color: #93E0E3;">assocr</span>              <span style="color: #DFAF8F;">=</span> pair   (fst <span style="color: #DFAF8F;">.</span> fst)             (pair (snd <span style="color: #DFAF8F;">.</span> fst) snd)  <span style="color: #5F7F5F;">-- </span><span style="color: #7F9F7F;">(2.33)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">p11</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"p11"</span>
      [ (assocr <span style="color: #DFAF8F;">.</span> assocl) (<span style="color: #CC9393;">'a'</span>, (<span style="color: #CC9393;">'b'</span>, <span style="color: #CC9393;">'c'</span>))
      , id                (<span style="color: #CC9393;">'a'</span>, (<span style="color: #CC9393;">'b'</span>, <span style="color: #CC9393;">'c'</span>))
      ]
      (<span style="color: #CC9393;">'a'</span>, (<span style="color: #CC9393;">'b'</span>, <span style="color: #CC9393;">'c'</span>))
</pre>
</div>

<p>
<b>Exercise 2.3</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">=</td>
<td class="left">\((assocr \circ assocl) (a, (b, c))\)</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">assocl def</td>
<td class="left">=</td>
<td class="left">\((assocr \circ \langle \langle fst      ,  fst \circ snd \rangle            ,  snd \circ snd \rangle) (a, (b, c))\)</td>
</tr>

<tr>
<td class="left">(2.18)</td>
<td class="left">pair def</td>
<td class="left">=</td>
<td class="left">\((assocr \circ (       \langle fst      ,  fst \circ snd \rangle (a, (b, c)), (snd \circ snd) (a, (b, c))   )\)</td>
</tr>

<tr>
<td class="left">(2.20) x 2</td>
<td class="left">\(\times\)-cancellation</td>
<td class="left">=</td>
<td class="left">\((assocr \circ (       \langle fst      ,  fst \circ snd \rangle (a, (b, c)),                         c     )\)</td>
</tr>

<tr>
<td class="left">(2.18)</td>
<td class="left">pair def</td>
<td class="left">=</td>
<td class="left">\((assocr \circ (        (fst (a, (b, c)), (fst \circ snd) (a, (b, c)) ),                              c     )\)</td>
</tr>

<tr>
<td class="left">(2.20) x 3</td>
<td class="left">\(\times\)-cancellation</td>
<td class="left">=</td>
<td class="left">\((assocr \circ (        (     a         ,                      b      ),                              c     )\)</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">=</td>
<td class="left">&#x2026;</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">=</td>
<td class="left">\((a, (b, c))\)</td>
</tr>
</tbody>
</table>

<p>
<b>Exercise 2.4</b>
</p>

<p>
Use (2.22) (product of two functions) to prove (2.28) (\(\times\)-functor) and (2.29) (\(\times\)-functor-id).
</p>

<p>
Prove (2.28):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="right">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">\(((g \circ h) \times (i \circ j))\)</td>
</tr>

<tr>
<td class="right">2.22</td>
<td class="left">&#xa0;</td>
<td class="left">=</td>
<td class="left">\(\langle (g \circ h) \circ fst, (i \circ j) \circ snd \rangle\)</td>
</tr>

<tr>
<td class="right">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">TODO &#x2026;</td>
</tr>
</tbody>
</table>


<hr  />
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">2.9 coproducts &#x2014; gluing functions which do not compose</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1">(2.35) either def : \([f,g] : A + B \rightarrow C\)</h3>
<div class="outline-text-3" id="text-8-1">
<p>
<i>coproduct</i> of \(A\) and \(B\) is <i>disjoint union</i> data type that has
values "stamped" with different tags to indicate whether the value
came from \(A\) or \(B\).
</p>

<p>
<a href="https://hackage.haskell.org/package/base-4.7.0.0/docs/src/Data-Either.html#either">https://hackage.haskell.org/package/base-4.7.0.0/docs/src/Data-Either.html#either</a>
</p>

<p>
Use <code>Either</code> with <code>Left</code> / <code>Right</code> <i>injections</i>.
</p>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">either</span> <span style="color: #DFAF8F;">::</span> (a <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> (b <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a b <span style="color: #DFAF8F;">-&gt;</span> c
<span style="color: #93E0E3;">either</span> f <span style="color: #F0DFAF; font-weight: bold;">_</span> (<span style="color: #7CB8BB;">Left</span>  a) <span style="color: #DFAF8F;">=</span> f a
<span style="color: #93E0E3;">either</span> <span style="color: #F0DFAF; font-weight: bold;">_</span> g (<span style="color: #7CB8BB;">Right</span> b) <span style="color: #DFAF8F;">=</span> g b
</pre>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">e1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"e1"</span>
     [ ((<span style="color: #DFAF8F;">*</span>11)     `<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either`     (<span style="color: #DFAF8F;">+</span>1))   (<span style="color: #7CB8BB;">Left</span>   9)
     , ((<span style="color: #DFAF8F;">*</span>11)     `<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either`     (<span style="color: #DFAF8F;">+</span>1))   (<span style="color: #7CB8BB;">Right</span> 98)
     , (arr (<span style="color: #DFAF8F;">*</span>11)  <span style="color: #DFAF8F;">|||</span>          arr (<span style="color: #DFAF8F;">+</span>1))   (<span style="color: #7CB8BB;">Left</span>   9)
     , (arr (<span style="color: #DFAF8F;">*</span>11)  <span style="color: #DFAF8F;">|||</span>          arr (<span style="color: #DFAF8F;">+</span>1))   (<span style="color: #7CB8BB;">Right</span> 98)
     ]
     99
</pre>
</div>


<div class="figure">
<p><img src="./either.png" alt="either.png" />
</p>
</div>

<p>
<i>product</i> and <i>coproduct</i> are <i>dual</i> mathematical constructs.  Duality
means that everythings said about product \(A \times B\) can be rephrased to
coproduct \(A + B\).
</p>

<p>
The sum of two functions <code>f + g</code> is the dual of the product of two functions <code>f × g</code> :
</p>
</div>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2">(2.37) \(+\) of two functions def : \(f + g = [Left \circ f, Right \circ g]\)</h3>
<div class="outline-text-3" id="text-8-2">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">sum</span> <span style="color: #DFAF8F;">::</span> (a <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> (b <span style="color: #DFAF8F;">-&gt;</span> d) <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a b <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> c d
<span style="color: #93E0E3;">sum</span> f g  <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (<span style="color: #7CB8BB;">Left</span> <span style="color: #DFAF8F;">.</span> f) (<span style="color: #7CB8BB;">Right</span> <span style="color: #DFAF8F;">.</span> g)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">su1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"su1"</span>
      [ (    (<span style="color: #DFAF8F;">*</span>11) `<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>sum`     (<span style="color: #DFAF8F;">+</span>1))   (<span style="color: #7CB8BB;">Left</span> 9)
      , (arr (<span style="color: #DFAF8F;">*</span>11)  <span style="color: #DFAF8F;">+++</span>       arr (<span style="color: #DFAF8F;">+</span>1))   (<span style="color: #7CB8BB;">Left</span> 9)
      ]
      (<span style="color: #7CB8BB;">Left</span> 99)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3">(2.38) \(+\)-cancellation : \([g,h] \circ Left = g\), \([g,h] \circ Right = h\)</h3>
<div class="outline-text-3" id="text-8-3">

<div class="figure">
<p><img src="./sum-cancellation.png" alt="sum-cancellation.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">sc1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"sc1"</span>
      [ (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (<span style="color: #DFAF8F;">+</span>10) (<span style="color: #DFAF8F;">*</span>10) <span style="color: #DFAF8F;">.</span> <span style="color: #7CB8BB;">Left</span>)  10
      ,              (<span style="color: #DFAF8F;">+</span>10)                10
      ]
      20
<span style="color: #93E0E3;">sc2</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"sc2"</span>
      [ (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (<span style="color: #DFAF8F;">+</span>10) (<span style="color: #DFAF8F;">*</span>10) <span style="color: #DFAF8F;">.</span> <span style="color: #7CB8BB;">Right</span>) 10
      ,                    (<span style="color: #DFAF8F;">*</span>10)          10
      ]
      100
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4">(2.39) \(+\)-reflexion : \([ Left, Right ] = id_{A + B}\)</h3>
<div class="outline-text-3" id="text-8-4">

<div class="figure">
<p><img src="./sum-reflexion.png" alt="sum-reflexion.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">sr1</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"sr1"</span>
      [ (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either <span style="color: #7CB8BB;">Left</span> <span style="color: #7CB8BB;">Right</span>    (<span style="color: #7CB8BB;">Left</span>   10)
                 <span style="color: #DFAF8F;">::</span> (<span style="color: #7CB8BB;">Show</span> a, <span style="color: #7CB8BB;">Num</span> a, <span style="color: #7CB8BB;">Show</span> b, <span style="color: #7CB8BB;">Num</span> b) <span style="color: #DFAF8F;">=&gt;</span> <span style="color: #7CB8BB;">Either</span> a b)
      , id                         (<span style="color: #7CB8BB;">Left</span>   10)
      ]
      (<span style="color: #7CB8BB;">Left</span> 10)

<span style="color: #93E0E3;">sr2</span> <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">U</span><span style="color: #DFAF8F;">.</span>tt <span style="color: #CC9393;">"sr2"</span>
      [ (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either <span style="color: #7CB8BB;">Left</span> <span style="color: #7CB8BB;">Right</span>    (<span style="color: #7CB8BB;">Right</span> 100)
                 <span style="color: #DFAF8F;">::</span> (<span style="color: #7CB8BB;">Show</span> a, <span style="color: #7CB8BB;">Num</span> a, <span style="color: #7CB8BB;">Show</span> b, <span style="color: #7CB8BB;">Num</span> b) <span style="color: #DFAF8F;">=&gt;</span> <span style="color: #7CB8BB;">Either</span> a b)
      , id                         (<span style="color: #7CB8BB;">Right</span> 100)
      ]
      (<span style="color: #7CB8BB;">Right</span> 100)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5">(2.40) \(+\)-fusion : \(f \circ [ g , h ] = [ f \circ g , f \circ h ]\)</h3>
<div class="outline-text-3" id="text-8-5">

<div class="figure">
<p><img src="./sum-fusion.png" alt="sum-fusion.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell">sumFusionLeft, sumFusionRight <span style="color: #DFAF8F;">::</span> (c <span style="color: #DFAF8F;">-&gt;</span> d) <span style="color: #DFAF8F;">-&gt;</span> (a <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> (b <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a b <span style="color: #DFAF8F;">-&gt;</span> d
<span style="color: #93E0E3;">sumFusionLeft</span>  f g h <span style="color: #DFAF8F;">=</span> f <span style="color: #DFAF8F;">.</span> (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either g h)
<span style="color: #93E0E3;">sumFusionRight</span> f g h <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (f <span style="color: #DFAF8F;">.</span> g) (f <span style="color: #DFAF8F;">.</span> h)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6">(2.41) \(+\)-absorption : \([ g , h ] \circ ( i + j ) = [ g \circ i, h \circ j ]\)</h3>
<div class="outline-text-3" id="text-8-6">

<div class="figure">
<p><img src="./sum-absorption.png" alt="sum-absorption.png" />
</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell">sumAbsorptionLeft, sumAbsorptionRight <span style="color: #DFAF8F;">::</span> (d <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> (e <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> (a <span style="color: #DFAF8F;">-&gt;</span> d) <span style="color: #DFAF8F;">-&gt;</span> (b <span style="color: #DFAF8F;">-&gt;</span> e) <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a b <span style="color: #DFAF8F;">-&gt;</span> c
<span style="color: #93E0E3;">sumAbsorptionLeft</span>  g h i j <span style="color: #DFAF8F;">=</span> (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either g h) <span style="color: #DFAF8F;">.</span> (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>sum i j)
<span style="color: #93E0E3;">sumAbsorptionRight</span> g h i j <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (g <span style="color: #DFAF8F;">.</span> i) (h <span style="color: #DFAF8F;">.</span> j)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7">(2.42) \(+\)-functor : \((g \circ h) + (i \circ j) = (g + i) \circ (h + j)\)</h3>
<div class="outline-text-3" id="text-8-7">

<div class="figure">
<p><img src="./sum-functor-1m.jpg" alt="sum-functor-1m.jpg" />
</p>
<p><span class="figure-number">Figure 17:</span> left</p>
</div>


<div class="figure">
<p><img src="./sum-functor-2m.png" alt="sum-functor-2m.png" />
</p>
<p><span class="figure-number">Figure 18:</span> right</p>
</div>

<div class="org-src-container">

<pre class="src src-haskell">sumFunctorLeft, sumFunctorRight <span style="color: #DFAF8F;">::</span> (e <span style="color: #DFAF8F;">-&gt;</span> c) <span style="color: #DFAF8F;">-&gt;</span> (a <span style="color: #DFAF8F;">-&gt;</span> e) <span style="color: #DFAF8F;">-&gt;</span> (f <span style="color: #DFAF8F;">-&gt;</span> d) <span style="color: #DFAF8F;">-&gt;</span> (b <span style="color: #DFAF8F;">-&gt;</span> f) <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a b <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> c d
<span style="color: #93E0E3;">sumFunctorLeft</span>  g h i j <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>sum (g <span style="color: #DFAF8F;">.</span> h) (i <span style="color: #DFAF8F;">.</span> j)
<span style="color: #93E0E3;">sumFunctorRight</span> g h i j <span style="color: #DFAF8F;">=</span> (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>sum g i) <span style="color: #DFAF8F;">.</span> (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>sum h j)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8">(2.43) \(+\)-functor-id : \(id_A + id_B = id_{A+B}\)</h3>
<div class="outline-text-3" id="text-8-8">
<p>
TODO : diagram
</p>

<div class="org-src-container">

<pre class="src src-haskell">sumFunctorIdLeft, sumFunctorIdRight <span style="color: #DFAF8F;">::</span> <span style="color: #7CB8BB;">Either</span> a b <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a b
<span style="color: #93E0E3;">sumFunctorIdLeft</span>  <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>sum id id
<span style="color: #93E0E3;">sumFunctorIdRight</span> <span style="color: #DFAF8F;">=</span> id
</pre>
</div>

<p>
<b>Exercise 2.5</b>  TODO
</p>

<p>
<b>Exercise 2.6</b>  TODO
</p>

<hr  />
</div>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">2.10 mixing products and coproducts</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1">(2.47) pair/either exchange : \([ \langle f , g \rangle , \langle h , k \rangle ] = \langle [ f , h ], [ g , k ] \rangle\)</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #5F7F5F;">{-</span>
<span style="color: #7F9F7F;">peExchangeLeft, peExchangeRight :: (a -&gt; a') -&gt; (a -&gt; b') -&gt; (b -&gt; a') -&gt; (b -&gt; b') -&gt; Either a b -&gt; (a', b')</span>
<span style="color: #7F9F7F;">-}</span>
peExchangeLeft, peExchangeRight <span style="color: #DFAF8F;">::</span> (a <span style="color: #DFAF8F;">-&gt;</span> b)  <span style="color: #DFAF8F;">-&gt;</span> (a <span style="color: #DFAF8F;">-&gt;</span> d)  <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> b)  <span style="color: #DFAF8F;">-&gt;</span> (c <span style="color: #DFAF8F;">-&gt;</span> d)  <span style="color: #DFAF8F;">-&gt;</span> <span style="color: #7CB8BB;">Either</span> a c <span style="color: #DFAF8F;">-&gt;</span> (b,  d)

<span style="color: #93E0E3;">peExchangeLeft</span>  f g h k <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (pair        f g) (pair        h k)
<span style="color: #93E0E3;">peExchangeRight</span> f g h k <span style="color: #DFAF8F;">=</span> pair        (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either f h) (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either g k)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2">(2.49) undistr def : \(undistr = [ id \times first , id \times snd ]\)</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">undistr</span> <span style="color: #DFAF8F;">::</span> <span style="color: #7CB8BB;">Either</span> (a,b) (a,c) <span style="color: #DFAF8F;">-&gt;</span> (a, <span style="color: #7CB8BB;">Either</span> b c)
<span style="color: #93E0E3;">undistr</span>  <span style="color: #DFAF8F;">=</span> <span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>either (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product id <span style="color: #7CB8BB;">Left</span>) (<span style="color: #7CB8BB;">PDBC</span><span style="color: #DFAF8F;">.</span>product id <span style="color: #7CB8BB;">Right</span>)
</pre>
</div>

<p>
undistr shows:
</p>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3">(2.50) isomorphism: product distributes through coproduct : \((A \times B) + (A \times C) \cong A \times (B + C)\)</h3>
</div>

<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4">motivation for functors</h3>
<div class="outline-text-3" id="text-9-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<tbody>
<tr>
<td class="left">&#xa0;</td>
<td class="left">given</td>
<td class="left">&#xa0;</td>
<td class="left">\(f : A \rightarrow E\)</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">given</td>
<td class="left">&#xa0;</td>
<td class="left">\(g : B \rightarrow E\)</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">given</td>
<td class="left">&#xa0;</td>
<td class="left">\(h : C \rightarrow F\)</td>
</tr>

<tr>
<td class="left">(2.37)</td>
<td class="left">\(+\) of two functions def</td>
<td class="left">=</td>
<td class="left">\(g + h : B + C \rightarrow E + F\)</td>
</tr>

<tr>
<td class="left">(2.22)</td>
<td class="left">\(\times\) of two functions def</td>
<td class="left">=</td>
<td class="left">\(f \times (g + h) : A \times (B + C) \rightarrow D \times (E + F)\)</td>
</tr>
</tbody>
</table>

<p>
Preserves shape, but changes internal element types.
</p>

<p>
Combination of products and sums of functions have same shape as the
expressions that denote their domain and range.
</p>

<p>
Now abstract
</p>

<ul class="org-ul">
<li>left of (2.50) as : def G\((a,b,c) = (a \times b) + (a \times c)\)
</li>
<li>right of (2.50) as : def F\((a,b,c) = a \times (b + c)\)
</li>
<li>where \(a\), \(b\), \(c\) denote types
</li>
</ul>

<p>
then, with specific types and functions:
</p>


<div class="figure">
<p><img src="./F-G-undistr.png" alt="F-G-undistr.png" />
</p>
</div>

<p>
which instantiates to:
</p>


<div class="figure">
<p><img src="./F-G-undistr-instantiated.png" alt="F-G-undistr-instantiated.png" />
</p>
</div>

<p>
<b>Exercise 2.7</b> TODO
</p>

<p>
<b>Exercise 2.8</b> TODO
</p>

<p>
<b>Exercise 2.9</b> TODO
</p>

<hr  />

<div class="org-src-container">

<pre class="src src-haskell"><span style="color: #93E0E3;">main</span> <span style="color: #DFAF8F;">=</span>
    <span style="color: #7CB8BB;">T</span><span style="color: #DFAF8F;">.</span>runTestTT <span style="color: #DFAF8F;">$</span> <span style="color: #7CB8BB;">T.TestList</span> <span style="color: #DFAF8F;">$</span> c0 <span style="color: #DFAF8F;">++</span> c1 <span style="color: #DFAF8F;">++</span>
                               i0 <span style="color: #DFAF8F;">++</span> i1 <span style="color: #DFAF8F;">++</span> i2 <span style="color: #DFAF8F;">++</span> i3 <span style="color: #DFAF8F;">++</span>
                               p0 <span style="color: #DFAF8F;">++</span> p1 <span style="color: #DFAF8F;">++</span> p2 <span style="color: #DFAF8F;">++</span> p3 <span style="color: #DFAF8F;">++</span> p4 <span style="color: #DFAF8F;">++</span> p5 <span style="color: #DFAF8F;">++</span> p6 <span style="color: #DFAF8F;">++</span> p7 <span style="color: #DFAF8F;">++</span> p8 <span style="color: #DFAF8F;">++</span> p9 <span style="color: #DFAF8F;">++</span> p10 <span style="color: #DFAF8F;">++</span> p11 <span style="color: #DFAF8F;">++</span>
                               e1 <span style="color: #DFAF8F;">++</span>
                               su1 <span style="color: #DFAF8F;">++</span>
                               sc1 <span style="color: #DFAF8F;">++</span> sc2 <span style="color: #DFAF8F;">++</span> sr1 <span style="color: #DFAF8F;">++</span> sr2
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"></p>
</div>
</body>
</html>
